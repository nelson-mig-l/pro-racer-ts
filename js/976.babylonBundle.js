"use strict";(self.webpackChunkpro_racer=self.webpackChunkpro_racer||[]).push([[976],{9976:(e,t,s)=>{s.r(t),s.d(t,{Car:()=>o});var i=s(7057),h=s(9121),n=s(7417),a=s(9823);class o{constructor(e,t,s){this.ZERO_QUATERNION=new n._f,this.FRONT_LEFT=0,this.FRONT_RIGHT=1,this.BACK_LEFT=2,this.BACK_RIGHT=3,this.chassisWidth=1.8,this.chassisHeight=.6,this.chassisLength=4,this.massVehicle=200,this.wheelAxisPositionBack=-1,this.wheelRadiusBack=.4,this.wheelWidthBack=.3,this.wheelHalfTrackBack=1,this.wheelAxisHeightBack=.4,this.wheelAxisFrontPosition=1,this.wheelHalfTrackFront=1,this.wheelAxisHeightFront=.4,this.wheelRadiusFront=.4,this.wheelWidthFront=.3,this.friction=5,this.suspensionStiffness=10,this.suspensionDamping=.3,this.suspensionCompression=4.4,this.suspensionRestLength=.6,this.rollInfluence=0,this.steeringIncrement=.01,this.steeringClamp=.2,this.maxEngineForce=500,this.maxBreakingForce=10,this.incEngine=10,this.vehicleSteering=0,this.engineForce=0,this.breakingForce=0,this.wheelMeshes=[],this.vehicleReady=!1,this.greenMaterial=new i.StandardMaterial("GreenMaterial",t),this.greenMaterial.diffuseColor=new n.Wo(.5,.8,.5),this.greenMaterial.emissiveColor=new n.Wo(.5,.8,.5),this.blackMaterial=new i.StandardMaterial("BlackMaterial",t),this.blackMaterial.diffuseColor=new n.Wo(.1,.1,.1),this.blackMaterial.emissiveColor=new n.Wo(.1,.1,.1),this.scene=t;const h=t.getPhysicsEngine()?.getPhysicsPlugin().world;this.wheelDirectionCS0=new s.btVector3(0,-1,0),this.wheelAxleCS=new s.btVector3(-1,0,0);const a=new s.btBoxShape(new s.btVector3(.5*this.chassisWidth,.5*this.chassisHeight,.5*this.chassisLength)),o=new s.btTransform;o.setIdentity(),o.setOrigin(new s.btVector3(0,5,0)),o.setRotation(new s.btQuaternion(this.ZERO_QUATERNION.x,this.ZERO_QUATERNION.y,this.ZERO_QUATERNION.z,this.ZERO_QUATERNION.w));const r=new s.btDefaultMotionState(o),l=new s.btVector3(0,0,0);a.calculateLocalInertia(this.massVehicle,l),this.chassisMesh=this.createChassisMesh(this.chassisWidth,this.chassisHeight,this.chassisLength);const c=new s.btVector3(0,.4,0),w=new s.btTransform;w.setIdentity(),w.setOrigin(c);const d=new s.btCompoundShape;d.addChildShape(w,a);const g=new s.btRigidBody(new s.btRigidBodyConstructionInfo(this.massVehicle,r,d,l));g.setActivationState(4),h.addRigidBody(g),this.tuning=new s.btVehicleTuning;const u=new s.btDefaultVehicleRaycaster(h);this.vehicle=new s.btRaycastVehicle(this.tuning,g,u),this.vehicle.setCoordinateSystem(0,1,2),h.addAction(this.vehicle),this.vehicle.getChassisWorldTransform(),this.addWheel(!0,new s.btVector3(this.wheelHalfTrackFront,this.wheelAxisHeightFront,this.wheelAxisFrontPosition),this.wheelRadiusFront,this.wheelWidthFront,this.FRONT_LEFT),this.addWheel(!0,new s.btVector3(-this.wheelHalfTrackFront,this.wheelAxisHeightFront,this.wheelAxisFrontPosition),this.wheelRadiusFront,this.wheelWidthFront,this.FRONT_RIGHT),this.addWheel(!1,new s.btVector3(-this.wheelHalfTrackBack,this.wheelAxisHeightBack,this.wheelAxisPositionBack),this.wheelRadiusBack,this.wheelWidthBack,this.BACK_LEFT),this.addWheel(!1,new s.btVector3(this.wheelHalfTrackBack,this.wheelAxisHeightBack,this.wheelAxisPositionBack),this.wheelRadiusBack,this.wheelWidthBack,this.BACK_RIGHT),this.vehicleReady=!0}createChassisMesh(e,t,s){const i=a.V.CreateBox("box",{width:e,depth:s,height:t},this.scene);i.rotationQuaternion=new n._f,i.material=this.greenMaterial;const o=new h.i("FollowCam",new n.P(0,10,-10),this.scene);return o.radius=10,o.heightOffset=4,o.rotationOffset=0,o.cameraAcceleration=.05,o.maxCameraSpeed=400,o.attachControl(!0),o.lockedTarget=i,this.scene.activeCamera=o,i}addWheel(e,t,s,i,h){const n=this.vehicle.addWheel(t,this.wheelDirectionCS0,this.wheelAxleCS,this.suspensionRestLength,s,this.tuning,e);n.set_m_suspensionStiffness(this.suspensionStiffness),n.set_m_wheelsDampingRelaxation(this.suspensionDamping),n.set_m_wheelsDampingCompression(this.suspensionCompression),n.set_m_maxSuspensionForce(6e5),n.set_m_frictionSlip(40),n.set_m_rollInfluence(this.rollInfluence),this.wheelMeshes[h]=this.createWheelMesh(s,i)}createWheelMesh(e,t){const s=a.V.CreateCylinder("Wheel",{diameter:1,height:.5,tessellation:6},this.scene);return s.rotationQuaternion=new n._f,s.material=this.blackMaterial,s}}}}]);
//# sourceMappingURL=976.babylonBundle.js.map